<nav class="navbar navbar-expand-md navbar-light bg-light shadow fixed-top">
  <a class="navbar-brand" routerLink="/">
    Acceuil
    <img
      style="margin-top: -4px;"
      height="20px"
      width="20px"
      src="assets/prisme.png"
      alt="logo prisme"
      [ngStyle]="{ filter: user ? 'initial' : 'grayScale(1)' }"
  /></a>

  <button
    class="navbar-toggler"
    type="button"
    aria-controls="navbarContent"
    [attr.aria-expanded]="!collapsed"
    aria-label="Toggle navigation"
    (click)="collapsed = !collapsed"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="navbar-collapse" [class.collapse]="collapsed" id="navbarContent">
    <ul class="navbar-nav mr-auto">
      <ng-template #anonymousUser>
        <li class="nav-item">
          <a class="nav-link" (click)="googleSignin()">Connexion</a>
        </li>
      </ng-template>
      <li ngbDropdown *ngIf="user; else anonymousUser" class="nav-item">
        <a ngbDropdownToggle class="nav-link" id="user-menu"
          >{{ user.displayName }}
          <img class="avatar" [src]="user.photoURL" alt="avatar" />
        </a>
        <div
          ngbDropdownMenu
          class="dropdown-menu dropdown-menu-right animate slideIn"
          aria-labelledby="user-menu"
        >
          <a class="dropdown-item" routerLink="/profil/{{ user.uid }}"
            >Mon profil</a
          >

          <div class="dropdown-divider"></div>

          <ng-container *ngIf="user.isAdmin; else myOrders">
            <a class="dropdown-item" routerLink="/admin/bijoux">Mes bijoux</a>
            <a class="dropdown-item" routerLink="/admin/commandes"
              >Commandes reÃ§ues</a
            >
          </ng-container>

          <ng-template #myOrders>
            <a class="dropdown-item" routerLink="/commandes">Mes commandes</a>
          </ng-template>

          <div class="dropdown-divider"></div>

          <a class="dropdown-item" [routerLink]="" (click)="signOut()"
            >DÃ©connexion</a
          >
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/panier">
          <span
            class="badge badge-warning mr-1"
            *ngIf="cartService.cart as cart"
            >{{ cart.totalItemsCount }}</span
          >
          <span>ðŸ‘œ</span>
        </a>
      </li>
    </ul>
  </div>
  <form
    action="https://www.paypal.com/cgi-bin/webscr"
    method="post"
    target="_top"
  >
    <input type="hidden" name="cmd" value="_s-xclick" />
    <input type="hidden" name="hosted_button_id" value="UT8N387RVV4JL" />
    <input
      type="image"
      src="https://www.paypalobjects.com/fr_FR/FR/i/btn/btn_donate_LG.gif"
      border="0"
      name="submit"
      title="Soutenez nous en faisant un don sur PayPal"
      alt="Bouton Faites un don avec PayPal"
    />
    <img
      alt=""
      border="0"
      src="https://www.paypal.com/fr_FR/i/scr/pixel.gif"
      width="1"
      height="1"
    />
  </form>
</nav>
