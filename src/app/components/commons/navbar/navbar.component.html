<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top">
  <a class="navbar-brand float-right" routerLink="/">
    <img
      height="30px"
      width="30px"
      src="assets/coeur-des-fruits-et-lÃ©gumes.png"
      alt="coeur-des-fruits-et-lÃ©gumes"
      [ngStyle]="{ filter: user ? 'initial' : 'grayScale(1)' }"
    />
  </a>
  <ul class="navbar-nav mr-auto">
    <ng-template #anonymousUser>
      <li class="nav-item">
        <a class="nav-link" (click)="googleSignin()">Connexion</a>
      </li>
    </ng-template>
    <li ngbDropdown *ngIf="user; else anonymousUser" class="nav-item dropdown">
      <a
        ngbDropdownToggle
        class="nav-link dropdown-toggle"
        id="dropdown01"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false"
        >{{ user.displayName }}
        <img class="avatar" [src]="user.photoURL" alt="avatar" />
      </a>
      <div ngbDropdownMenu class="dropdown-menu" aria-labelledby="dropdown01">
        <a class="dropdown-item" routerLink="/profile/{{ user.uid }}"
          >Mon profil</a
        >
        <a
          *ngIf="user.isAdmin"
          class="dropdown-item"
          routerLink="/admin/products"
          >Mes produits</a
        >

        <div class="dropdown-divider"></div>

        <ng-container *ngIf="user.isAdmin; else myOrders">
          <a class="dropdown-item" routerLink="/admin/customers">Les clients</a>
          <a class="dropdown-item" routerLink="/admin/orders">Les commandes</a>
        </ng-container>

        <ng-template #myOrders>
          <a class="dropdown-item" routerLink="/my/orders">Mes commandes</a>
        </ng-template>

        <div class="dropdown-divider"></div>

        <a class="dropdown-item" [routerLink]="" (click)="signOut()"
          >DÃ©connexion</a
        >
      </div>
    </li>
  </ul>
  <ul class="navbar-nav ml-auto">
    <li class="nav-item -right">
      <a class="nav-link" routerLink="/shopping-cart">
        <div style="text-align: center;">
          <span
            style="margin-right: 2px;"
            class="badge badge-warning"
            *ngIf="cartService.cart as cart"
            >{{ cart.totalItemsCount }}</span
          >
          <span>ðŸ›’</span>
        </div></a
      >
    </li>
  </ul>
</nav>
