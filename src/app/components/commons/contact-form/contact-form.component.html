<form #f="ngForm">
  <ng-container *ngIf="!user">
    <div class="form-group">
      <label for="username">Votre nom (obligatoire)</label>
      <input
        [(ngModel)]="username"
        name="username"
        id="username"
        type="text"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="email">Votre email (obligatoire)</label>
      <input
        [(ngModel)]="email"
        name="email"
        id="email"
        type="email"
        pattern="^(\D)+(\w)*((\.(\w)+)?)+@(\D)+(\w)*((\.(\D)+(\w)*)+)?(\.)[a-z]{2,}$"
        class="form-control"
        required
      />
    </div>
  </ng-container>
  <div class="form-group">
    <label for="message"
      >Votre message <span *ngIf="requiredMessage">(obligatoire)</span></label
    >
    <textarea
      [(ngModel)]="message"
      name="message"
      id="message"
      class="form-control"
      [required]="requiredMessage"
    ></textarea>
  </div>
  <button
    (click)="sendMessage()"
    [disabled]="f.invalid"
    type="submit"
    class="btn btn-sm mt-2 float-end"
    [ngClass]="{
      'btn-secondary': requiredMessage,
      'btn-warning': !requiredMessage
    }"
  >
    {{ requiredMessage ? "Envoyer" : "J'accepte et je confirme ma commande" }}
  </button>
</form>
